<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ourglass TV Audio</title>
	<style>
		body { 
			text-align:center; 
			background:#EFEFEF; 
			padding-top:50px;
		}
	</style>
</head>
<body>
	<h1>Ourglass TV Audio</h1>
	<div class="ogaudio"
		 data-autoplay="true"
		 data-audio="true"
		 data-video="false"
		 data-max-audio-lag="0.95"
		 data-volume="1">
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.18.10/URI.js"></script>
	<script type="text/javascript" src="js/jsmpeg.js"></script>
	<script>
        $(document).ready(function(){
            var q = URI.parseQuery(location.search);
            var audioId = q.hasOwnProperty('aid') ? q['aid'] : null;
            if (typeof(audioId) === 'string') {
                console.log("Using audio stream " + audioId);
                //$(".ogaudio").data("protocol", audioId);
				$(".ogaudio").get().forEach(function(element, index, array) {
				    console.log(array[index]);
                    array[index].dataset['url'] = "ws://localhost:3000/";
					array[index].dataset['protocol'] = audioId;
                    }
				);
                JSMpeg.CreateVideoElements();
            }
        });
	</script>
</body>
</html>